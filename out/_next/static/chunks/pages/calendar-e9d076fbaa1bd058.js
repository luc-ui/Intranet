(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{6431:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return t(7405)}])},7405:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var a=t(5893),s=t(8277),r=t.n(s),l=t(7294),i=t(1163),c=t.n(i),d=t(6827),u=t(381),o=t.n(u),h=(t(4470),t(121),t(765)),f=t(1664),j=t.n(f),x=["LUNDI","MARDI","MERCREDI","JEUDI","VENDREDI","SAMEDI","DIMANCHE"];function m(e){var n=e.selectStrass,t=e.authStrass,s=e.mounted,i=e.setMounted,c=e.toggleCalendar,d=e.setToggleCalendar,u=(0,l.useState)([]),o=u[0],f=u[1];return(0,l.useEffect)((function(){s||(0,h.Z)("/calendar/UAI").then((function(e){f(e),i(!0)}))}),[s]),(0,a.jsxs)("div",{className:r().global,children:[(0,a.jsx)("h1",{children:"Calendrier de l'UAI"}),(0,a.jsx)("button",{onClick:function(){return d(!c)},children:(0,a.jsx)("h4",{className:"boutonAjout",children:"Voir le Calendrier Boquette"})}),t.includes(n.cn)?(0,a.jsx)(j(),{href:"/calendar?action=new",passHref:!0,children:(0,a.jsx)("h4",{className:"boutonAjout",children:"Ajouter un Horaire"})}):void 0,(0,a.jsxs)("table",{className:r().calendarUAI,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:r().semaineHeader,children:[(0,a.jsx)("th",{className:r().header,children:"Lundi"}),(0,a.jsx)("th",{className:r().header,children:"Mardi"}),(0,a.jsx)("th",{className:r().header,children:"Mercredi"}),(0,a.jsx)("th",{className:r().header,children:"Jeudi"}),(0,a.jsx)("th",{className:r().header,children:"Vendredi"}),(0,a.jsx)("th",{className:r().header,children:"Samedi"}),(0,a.jsx)("th",{className:r().header,children:"Dimanche"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{className:r().semaineBody,children:x.map((function(e){return(0,a.jsx)("td",{className:r().jour,children:o.map((function(s){return s.jour==e?(0,a.jsxs)("div",{className:r().sport,children:[(0,a.jsx)("h4",{className:r().texte,children:s.title}),(0,a.jsx)("p",{className:r().texte,children:s.hours}),(0,a.jsx)("p",{className:r().texte,children:s.infos}),t.includes(n.cn)?(0,a.jsx)(j(),{href:"/calendar?action=delete&id="+s.id,passHref:!0,children:(0,a.jsx)("h4",{className:"boutonEdit",children:"Supprimer"})}):void 0]}):void 0}))},e)}))})})]})]})}function p(e){var n=e.setMounted,t=(0,l.useState)(),s=t[0],i=t[1],d=(0,l.useState)("LUNDI"),u=d[0],o=d[1],f=(0,l.useState)(),j=f[0],m=f[1],p=(0,l.useState)(),N=p[0],_=p[1],C=(0,l.useState)(!1),v=C[0],S=C[1];(0,l.useEffect)((function(){v&&setTimeout((function(){alert("Horaire Ajout\xe9e !"),S(!1)}),100)}),[v]);return(0,a.jsxs)("div",{className:r().global,children:[(0,a.jsx)("h3",{children:"Ajouter un Horaire"}),(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,h.W)("/calendar","POST",{title:s,jour:u,hours:j,infos:N}).then((function(e){200==e&&(c().push("/calendar"),S(!0),n(!1))}))},children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{className:"texte",children:"Sport"}),(0,a.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},className:"field",placeholder:"Pitate",required:!0})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{className:"texte",children:"S\xe9lection du jour"}),(0,a.jsx)("select",{className:r().selection,onChange:function(e){return o(e.target.value)},children:x.map((function(e){return(0,a.jsx)("option",{value:e,children:e},e)}))})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{className:"texte",children:"Horaires"}),(0,a.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},className:"field",placeholder:"18h - 20h",required:!0})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{className:"texte",children:"Infos Suppl\xe9mentaires"}),(0,a.jsx)("input",{type:"text",onChange:function(e){return _(e.target.value)},className:"field",placeholder:"Gymnase / Zident / ..."})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"submit",children:"Ajouter"})})]})]})}var N=(0,d.Zt)(o());function _(e){var n=e.selectStrass,t=(0,l.useState)(!1),s=t[0],i=t[1],u=(0,l.useState)(!1),o=u[0],f=u[1],j=(0,l.useState)([]),x=j[0],_=j[1],C=(0,l.useState)(!1),v=C[0],S=C[1];(0,l.useEffect)((function(){(0,h.Z)("/calendar").then((function(e){var n=[];e.map((function(e,t){n.push({id:t,title:e.summary,start:new Date(e.start.dateTime),end:new Date(e.end.dateTime)})})),_(n)}))}),[]),(0,l.useEffect)((function(){v&&setTimeout((function(){alert("Horaire supprim\xe9e !"),S(!1)}),100)}),[v]);var b=["AE","UAI"];if(!o)return(0,a.jsxs)("div",{className:r().global,children:[(0,a.jsx)("h1",{children:"Calendrier"}),(0,a.jsx)("button",{onClick:function(){return f(!o)},children:(0,a.jsx)("h4",{className:"boutonAjout",children:"Voir le Calendrier de l'UAI"})}),(0,a.jsx)(d.f,{localizer:N,events:x,startAccessor:"start",endAccessor:"end",defaultView:"week",min:new Date(1972,0,1,7,0,0)})]});switch(c().query.action){case"new":if(b.includes(n.cn))return(0,a.jsx)(p,{setMounted:i});case"delete":if(b.includes(n.cn)&&c().query.id){var g=c().query.id;(0,h.W)("/calendar","DELETE",{id:g}).then((function(e){200==e&&(c().push("/calendar"),S(!0),i(!1))}))}default:return(0,a.jsx)(m,{selectStrass:n,authStrass:b,mounted:s,setMounted:i,toggleCalendar:o,setToggleCalendar:f})}}},8277:function(e){e.exports={global:"Calendar_global__pfGQf",calendarUAI:"Calendar_calendarUAI__PP00G",semaineHeader:"Calendar_semaineHeader__SeS6e",semaineBody:"Calendar_semaineBody__39TJl",header:"Calendar_header__tCYho",jour:"Calendar_jour__fwh26",selection:"Calendar_selection__FaJoX",sport:"Calendar_sport__duh0T",texte:"Calendar_texte__DIBHC"}}},function(e){e.O(0,[770,885,70,774,888,179],(function(){return n=6431,e(e.s=n);var n}));var n=e.O();_N_E=n}]);