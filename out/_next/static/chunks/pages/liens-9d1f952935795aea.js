(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{2991:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liens",function(){return t(7216)}])},7216:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var s=t(5893),i=t(1163),c=t.n(i),l=t(7294),r=t(765),u=t(1664),a=t.n(u),o=t(1228),d=t.n(o);function h(e){var n=e.selectStrass,t=e.authStrass,i=e.mounted,c=e.setMounted,u=(0,l.useState)([]),o=u[0],h=u[1];return(0,l.useEffect)((function(){i||(0,r.Z)("/liens").then((function(e){h(e),c(!0)}))}),[i]),(0,s.jsxs)("div",{className:d().global,children:[(0,s.jsx)("h3",{children:"Liens Utiles"}),t.includes(n.cn)?(0,s.jsx)(a(),{href:"/liens?action=new",passHref:!0,children:(0,s.jsx)("h4",{className:"boutonAjout",children:"Ajouter un lien"})}):void 0,o.map((function(e){return(0,s.jsxs)("section",{className:d().section,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:d().header,children:(0,s.jsx)("h4",{className:d().title,children:e.title})}),(0,s.jsx)("div",{className:d().content,children:(0,s.jsx)("a",{href:e.link,rel:"noopener",children:e.link})})]}),t.includes(n.cn)?(0,s.jsx)("div",{className:d().sectionEdit,children:(0,s.jsx)(a(),{href:"/liens?action=delete&id="+e.id,passHref:!0,children:(0,s.jsx)("h4",{className:"boutonEdit",children:"Supprimer"})})}):void 0]},e.title)}))]})}function f(e){var n=e.setMounted,t=(0,l.useState)(),i=t[0],u=t[1],a=(0,l.useState)(),o=a[0],h=a[1],f=(0,l.useState)(!1),_=f[0],j=f[1];(0,l.useEffect)((function(){_&&setTimeout((function(){alert("Lien Ajout\xe9 !"),j(!1)}),100)}),[_]);return(0,s.jsxs)("div",{className:d().global,children:[(0,s.jsx)("h3",{children:"Ajouter un lien"}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,r.W)("/liens","POST",{title:i,url:o}).then((function(e){200==e&&(c().push("/liens"),j(!0),n(!1))}))},children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Nom du lien"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return u(e.target.value)},className:"field",placeholder:"Drive de birse",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"URL"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return h(e.target.value)},className:"field",placeholder:"http://...",required:!0})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"submit",children:"Ajouter"})})]})]})}function _(e){var n=e.selectStrass,t=(0,l.useState)(!1),i=t[0],u=t[1],a=(0,l.useState)(!1),o=a[0],d=a[1];(0,l.useEffect)((function(){o&&setTimeout((function(){alert("Lien Supprim\xe9 !"),d(!1),u(!1)}),100)}),[o]);var _=["AE"];switch(c().query.action){case"new":if(_.includes(n.cn))return(0,s.jsx)(f,{setMounted:u});case"delete":if(_.includes(n.cn)&&c().query.id){var j=c().query.id;(0,r.W)("/liens","DELETE",{id:j}).then((function(e){200==e&&(c().push("/liens"),d(!0),u(!1))}))}default:return(0,s.jsx)(h,{selectStrass:n,authStrass:_,mounted:i,setMounted:u})}}},1228:function(e){e.exports={global:"Liens_global__Ait_Z",section:"Liens_section__KgA8c",header:"Liens_header__OCBTn",title:"Liens_title__w8bg_",content:"Liens_content__F2aky",sectionEdit:"Liens_sectionEdit__byy86"}}},function(e){e.O(0,[774,888,179],(function(){return n=2991,e(e.s=n);var n}));var n=e.O();_N_E=n}]);