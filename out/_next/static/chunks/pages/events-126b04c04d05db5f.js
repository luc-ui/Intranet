(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{3200:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return t(989)}])},989:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var s=t(5893),u=t(7294),r=t(1163),i=t.n(r),a=t(1664),c=t.n(a),l=t(4567),o=t.n(l),d=t(765);function f(e){var n=e.selectStrass,t=e.authStrass,r=e.mounted,i=e.setMounted,a=(0,u.useState)([]),l=a[0],f=a[1];return(0,u.useEffect)((function(){r||(0,d.Z)("/events").then((function(e){f(e),i(!0)}))}),[r]),(0,s.jsxs)("div",{className:o().global,children:[(0,s.jsx)("h1",{children:"Ev\xe8nements"}),t.includes(n.cn)?(0,s.jsx)(c(),{href:"/events?action=new",passHref:!0,children:(0,s.jsx)("h4",{className:"boutonAjout",children:"Ajouter un \xe9v\xe9nement"})}):void 0,(0,s.jsx)("div",{className:o().grid,children:null===l||void 0===l?void 0:l.map((function(e){return(0,s.jsx)(c(),{href:"/events/"+e.useName,passHref:!0,children:(0,s.jsxs)("div",{className:o().card,children:[(0,s.jsx)("h4",{children:e.title}),t.includes(n.cn)?(0,s.jsx)(c(),{href:"/events?action=delete&id="+e.useName,passHref:!0,children:(0,s.jsx)("h4",{className:"boutonEdit",children:"Supprimer"})}):void 0]})},e.useName)}))})]})}function h(e){var n=e.setMounted,t=(0,u.useState)(),r=t[0],a=t[1],c=(0,u.useState)(),l=c[0],f=c[1],h=(0,u.useState)(),v=h[0],m=h[1],x=(0,u.useState)([]),j=x[0],p=x[1],_=(0,u.useState)(!1),N=_[0],E=_[1];(0,u.useEffect)((function(){N&&setTimeout((function(){alert("Ev\xe8nement Ajout\xe9 !"),E(!1)}),100)}),[N]),(0,u.useEffect)((function(){(0,d.Z)("/strass").then((function(e){return p(e)}))}),[]);return(0,s.jsxs)("div",{className:o().global,children:[(0,s.jsx)("h3",{children:"Ajouter un nouvel \xe9v\xe8nement"}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,d.W)("/events","POST",{title:r,useName:l,strass:v}).then((function(e){200==e&&(i().push("/events"),E(!0),n(!1))}))},children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Titre de l'\xe9v\xe9nement"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)},className:"field",placeholder:"D\xe9livrance",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Nom d'usage"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return f(e.target.value)},className:"field",placeholder:"delivrance",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Strass autoris\xe9e \xe0 \xe9diter"}),(0,s.jsx)("select",{className:o().selection,onChange:function(e){return m(e.target.value)},children:null===j||void 0===j?void 0:j.map((function(e){return(0,s.jsx)("option",{value:e.cn,children:e.description},e.cn)}))})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"submit",children:"Cr\xe9er"})})]})]})}function v(e){var n=e.selectStrass,t=(0,u.useState)(!1),r=t[0],a=t[1],c=(0,u.useState)(!1),l=c[0],o=c[1];(0,u.useEffect)((function(){l&&setTimeout((function(){alert("Ev\xe8nement supprim\xe9 !"),o(!1)}),100)}),[l]);var v=["AE"];switch(i().query.action){case"new":if(v.includes(n.cn))return(0,s.jsx)(h,{setMounted:a});case"delete":if(v.includes(n.cn)&&i().query.id){var m=i().query.id;(0,d.W)("/events","DELETE",{useName:m}).then((function(e){200==e&&(i().push("/events"),o(!0),a(!1))}))}default:return(0,s.jsx)(f,{selectStrass:n,authStrass:v,mounted:r,setMounted:a})}}},4567:function(e){e.exports={global:"Events_global__EsaRd",grid:"Events_grid__30_3u",card:"Events_card__oOiPG",selection:"Events_selection__jYlr1"}}},function(e){e.O(0,[774,888,179],(function(){return n=3200,e(e.s=n);var n}));var n=e.O();_N_E=n}]);